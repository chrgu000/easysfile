  

[TOC]

# 一 api 接口说明

## **1** api例子参考

传参方式： get

传参例子：

<http://www.gzfesco.cn/api/qcshcz/ballgame/step1/?sex=1>

非传参例子：

<http://www.gzfesco.cn/api/qcshcz/ballgame/step1/>（因为有些项目用到微信，未防止浏览器地址会跳回redirect_url？code=xxxxx，所以此处地址末尾最好要加/）

## **2** 返回json格式

| **参数** | **参数类型** | **参数说明**                     |
| -------- | ------------ | -------------------------------- |
| code     | int          | 20000代表成功通讯，40000代表失败 |
| message  | string       | 消息体                           |
| data     | array        | 返回的实际数据                   |

## **3** 代码code说明

| 代码(code) | **说明** |
| ---------- | -------- |
| 20000      | 通讯成功 |
| 40000      | 通讯失败 |

## 4 id说明

| id     | 说明                       |
| ------ | -------------------------- |
| openid | 微信的id                   |
| pid    | 代表项目的id               |
| eid    | 代表用户的id，数据库中唯一 |



# 二 本次吉利巡展实际接口说明



## 0 授权中转页面（扫码注册接口）

http://www.gzfesco.cn/xunzhan/qicheng/authorize2/?url=www.baidu.com?pictureid=3

| **参数**  | **取值范围** | **说明**                                         |
| --------- | ------------ | ------------------------------------------------ |
| URl       | 必填         | 地址，你们h5给地址，这是代表h5方获取openid的地址 |
| pictureid | 必填         | 保留参数，不做实际意义。这是为了将来考虑         |

 

## 1 注册接口

请求 ：http://www.gzfesco.cn/xunzhan/qicheng/register/?openid=xxx&tel=qqq&username=sss&cars=帝豪GSe&province=广东省&sex=男&birthday=2019-01-01&city=上海市&verification=2121&pictureid=1

| **参数**     | **取值范围**       | **说明**           |
| ------------ | ------------------ | ------------------ |
| openid       |                    | 微信id             |
| tel          |                    | 电话               |
| username     |                    | 姓名               |
| cars         | char               | 车型，如帝豪GSE    |
| province     | char               | 省份，如广东省     |
| sex          | char               | 性别，如女         |
| birthday     | data，如2019-01-01 | 代表出生年月       |
| verification | int                | 用户填写的验证码   |
| city         | 用户填写的城市     | 如上海市           |
| pictureid    | 数字               | 这里仅作预添加字段 |

正常返回示例：

{"code":20011,"message":"\u6570\u636e\u5e93\u5df2\u5b58\u5728\u8be5openid","data":[]}

| 参数       | 说明               |
| ---------- | ------------------ |
| eid        | 用户的id           |
| openid     | 微信的id           |
| nickname   | 微信的昵称         |
| headimgurl | 微信的头像         |
| username   | 用户注册的姓名     |
| tel        | 用户注册的电话号码 |

| code  | 说明                                   |
| ----- | -------------------------------------- |
| 20010 | 用户信息插入数据库成功，并返回用户信息 |
| 20011 | 数据库已存在该openid，不能插入         |
| 20020 | 验证码验证失败                         |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |

## 2 判断用户是否注册接口

请求 ：http://www.gzfesco.cn/xunzhan/qicheng/isreg/?openid=xxx

| **参数** | **取值范围** | **说明** |
| -------- | ------------ | -------- |
| openid   |              | 微信id   |

正常返回示例：

{"code":20011,"message":"\u6570\u636e\u5e93\u5df2\u5b58\u5728\u8be5openid","data":[]}

| code  | 说明   |
| ----- | ------ |
| 20012 | 没注册 |
| 20013 | 已注册 |

已注册时候返回：

| 参数     | 说明               |
| -------- | ------------------ |
| eid      | 用户的id           |
| openid   | 微信的id           |
| username | 用户注册的姓名     |
| tel      | 用户注册的电话号码 |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |

## 3 获取省份接口

请求 ：http://www.gzfesco.cn/xunzhan/qicheng/get_province

正常返回示例：

{"code":20000,"message":"\u6570\u636e\u5e93\u5df2\u5b58\u5728\u8be5openid","data":[]}

| 参数 | 说明   |
| ---- | ------ |
| id   | 省份id |
| name | 名字   |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |



## 4 获取市接口（拿省的id进行查询）  

请求 ：<http://www.gzfesco.cn/xunzhan/qicheng/get_city/?id=5> 

正常返回示例：

{"code":20000,"message":"successful connected","data": [{"id":54,"parentid":5,"name":"\u5357\u4eac\u5e02"}, {"id":55,"parentid":5,"name":"\u5357\u901a\u5e02"}, {"id":56,"parentid":5,"name":"\u9547\u6c5f\u5e02"}, {"id":57,"parentid":5,"name":"\u65e0\u9521\u5e02"}, {"id":58,"parentid":5,"name":"\u8fde\u4e91\u6e2f\u5e02"}, {"id":59,"parentid":5,"name":"\u6cf0\u5dde\u5e02"}, {"id":60,"parentid":5,"name":"\u5bbf\u8fc1\u5e02"}, {"id":61,"parentid":5,"name":"\u6dee\u5b89\u5e02"}, {"id":62,"parentid":5,"name":"\u5f90\u5dde\u5e02"}, {"id":63,"parentid":5,"name":"\u76d0\u57ce\u5e02"}, {"id":64,"parentid":5,"name":"\u5e38\u5dde\u5e02"}, {"id":65,"parentid":5,"name":"\u626c\u5dde\u5e02"}, {"id":66,"parentid":5,"name":"\u82cf\u5dde\u5e02"}]} 

| 参数     | 说明   |
| -------- | ------ |
| id       | 市id   |
| name     | 名字   |
| parentid | 省的id |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |



## 5 获取车型接口

请求 ：http://www.gzfesco.cn/xunzhan/qicheng/get_cars

正常返回示例：

{"code":20000,"message":"\u6570\u636e\u5e93\u5df2\u5b58\u5728\u8be5openid","data":[]}

| 参数 | 说明     |
| ---- | -------- |
| id   | 车id     |
| name | 车的名字 |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |

## 6 获取验证码接口（产生4位随机验证码）  

请求 ：<http://www.gzfesco.cn/xunzhan/qicheng/send/?mobile=13923122705&openid=xxx> 

| 参数   | 说明     |
| ------ | -------- |
| mobile | 手机号码 |
| openid | 微信id   |

正常返回示例：

{"code":20000,"message":"\u6570\u636e\u5e93\u5df2\u5b58\u5728\u8be5openid","data":[]}

| code  | 说明 |
| ----- | ---- |
| 20000 | 正常 |

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |

## ~~9 请求每天的留职数据(暂时取消，待备用)~~

请求：http://www.gzfesco.cn/api/jilixunzhan/jilixunzhanjiekou/excel2/?date=2019-03-28&pictureid=3

| 参数      | 说明       |
| --------- | ---------- |
| date      | 0000-00-00 |
| pictureid | 如 3       |

正常返回示例：

直接返回一个xlsx格式的文件

失败返回示例：

{"code":40000,"message":"exception happend,please contact administrator","data":[]}

| code  | 说明         |
| ----- | ------------ |
| 40000 | 数据库有异常 |



# 